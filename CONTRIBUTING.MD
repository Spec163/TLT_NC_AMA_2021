# TLT_NC_AMA_2021
Тестовый проект для обсучения студентов

## Как собирать проект
* У разработчика должен быть установлен Maven
* Необходимо запустить комадну ```mvn clean install``` в корне проекта

## Правила работы на проекте

+ Участник получает задачу из [Issues][issues], **если задача не создана, но обговоренна словестно - задачу необходимо завести самостоятельно** с кратким описанием необходимых действий;
+ Участник **переводит задачу на себя** (кнопка `Assign to me`);
+ Участник скачивает проект к себе(если не скачан) и **создает новую ветку** под свою задачу, **название ветки должно быть в формате** `featues/issue_{номер задачи}`;
+ **Все модули\ДЗ** проекта должны создаваться в подпапке `projects` (например: `project\my_module`) и иметь [Минимальную конфигурацию для модуля](#минимальная-конфигурация-для-модуля) - если модуль, нам которым ведется работа, уже создан - создавать новый модуль не нужно;
+ Участник **ведет разработку задачи в данной ветке** и делает коммиты, **разделенные по типу изменений**. [Правила создания коммитов](#правила-создания-коммитов) (**На проекте настроена проверка коммитов**);
+ Участник заводит новый [пулл реквест][pulls] для проверки кода куратором, и дожидается сборки проекта, получения флага `build_passed` на пулл реквесте, и автоматического сообщения от старшего куратора (также в пулл реквесте);
+ Имя пулл реквеста должен иметь формат: `{название задачи}`, в поле Description пулл реквеста должны быть описаны основные изменения, сделанные участником (кратко) и быть упомянута задача, над которой он\она работает в формате `Closes #1` (Это приведет к закрытию задачи автоматически, после принятия куратором).



### Правила создания коммитов:
>Все изменения должны быть разделены на малые порции по типу изменений [Варианты коммитов](#варианты-коммитов)

##### Варианты коммитов
| Тип коммита                               | Структура сообщения для коммита                  | Пример                                                          |
| ----------------------------------------- | ------------------------------------------------ | --------------------------------------------------------------- |
| Исправления                               | `fix: {описание и номер задачи}`                 | `fix: Починка проблемы #1`                                      |
| Исправления                               | `fix(категория): {описание и номер задачи}`      | `fix(module1): Починка проблемы #1`                             |
| Нововведения                              | `feat: {описание и номер задачи}`                | `feat: Новый модуль для задачи #1`                              |
| Нововведения                              | `feat(категория): {описание и номер задачи}`     | `feat(module1): Новый модуль для задачи #1`                     |
| Улучшение существующего кода              | `refactor: {описание и номер задачи}`            | `refactor: Обновление модуля #1 под новые стандарты`            |
| Улучшение существующего кода              | `refactor(категория): {описание и номер задачи}` | `refactor(module1): Обновление модуля #1 под новые стандарты`   |
| Тесты                                     | `test: {описание и номер задачи}`                | `test: Тесты для модуля #1`                                     |
| Тесты                                     | `test(категория): {описание и номер задачи}`     | `test(module1): Тесты для модуля #1`                            |
| Документация                              | `docs: {описание и номер задачи}`                | `docs: Документация для модуля #1`                              |
| Документация                              | `docs(категория): {описание и номер задачи}`     | `docs(module1): Документация для модуля #1`                     |
| Исправления после проверки PMD/Checkstyle | `style: {описание и номер задачи}`               | `style: Исправление отступов в модуле #1`                       |
| Исправления после проверки PMD/Checkstyle | `style(категория): {описание и номер задачи}`    | `style(module1): Исправление отступов в модуле #1`              |
| Изменения в сборке проекта                | `build: {описание и номер задачи}`               | `build: добавление шага {название шага} для задачи #1`          |
| Изменения в сборке проекта                | `build(категория): {описание и номер задачи}`    | `build(deps): добавление шага {название шага} для задачи #1`    |
| Изменения в доставке проекта              | `ci: {описание и номер задачи}`                  | `ci: Установка на сервер Heroku для задачи #1`                  |
| Изменения в доставке проекта              | `ci(категория): {описание и номер задачи}`       | `ci(heroku): Установка на сервер Heroku для задачи #1`          |

+ Сообщение должно начинаться с категории коммита: fix, feat, refactor, test, docs,style, build, ci;
+ Затем в скобочках идет категория (не обязательно);
+ Затем должно быть двоеточие и пробел;
+ Затем идет краткое описание изменений (без точки в конце);
+ Со следующей строки идет детальное описание изменений (не обязательно);
+ Максимальная длина строки должна не превышать 120 символов;
+ [Статья][conventional_commits] с детальным описанием правил написания сообщений в коммитах.


### Минимальная конфигурация для модуля

Создаваемый модуль должен содержать файл pom.xml со следующим содержимым:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <parent>
    <artifactId>projects</artifactId>
    <groupId>nc.unc.ama</groupId>
    <version>0.0.1-SNAPSHOT</version>
    <relativePath>../pom.xml</relativePath>
  </parent>
  <modelVersion>4.0.0</modelVersion>
  <artifactId>!!!ИМЯ_МОДУЛЯ!!!</artifactId>
  <packaging>!!!jar\war!!!</packaging>
</project>
```
+ Если модуль является консольным\автономным приложением, выбираем Packaging - jar;
+ Если модуль является WEB-модулем, для установки в Application Server (Tomcat\Jetty\JBOSS\TomEE\Welogic), выбираем Packaging - war.


#### Тестовый стенд

Изменения из всех принятых пулл реквестов добавляются в ветку main, после добавления запускается автоматическая сборка и отправка модулей на тестовый стенд для дальнейшей ручной проверки.
Адреса стенда:

| Модуль                     | Адрес                                      |
|----------------------------|--------------------------------------------|
| discovery_evr              | [discovery-tlt-2021][discovery-tlt-2021]   |
| gateway                    | [gateway-tlt-2021][gateway-tlt-2021]       |
| bank_service               | [bank-tlt-2021][bank-tlt-2021]             |
| complaint_handling_service | [complaints-tlt-2021][complaints-tlt-2021] |
| guest_service              | [guests-tlt-2021][guests-tlt-2021]         |
| logger                     | [logger-tlt-2021][logger-tlt-2021]         |

[conventional_commits]: https://www.conventionalcommits.org/en/v1.0.0/
[issues]: https://github.com/kostua16/TLT_NC_AMA_2021/issues
[pulls]: https://github.com/kostua16/TLT_NC_AMA_2021/pulls
[discovery-tlt-2021]: https://discovery-tlt-2021.herokuapp.com/
[gateway-tlt-2021]: https://gateway-tlt-2021.herokuapp.com/
[bank-tlt-2021]: https://bank-tlt-2021.herokuapp.com/
[complaints-tlt-2021]: https://complaints-tlt-2021.herokuapp.com/
[guests-tlt-2021]: https://guests-tlt-2021.herokuapp.com/
[logger-tlt-2021]: https://logger-tlt-2021.herokuapp.com/

